import{routes,root}from"/src/main.js";const ptr=path=>new RegExp("^"+path.replace(/\//g,"\\/").replace(/:\w+/g,"(.+)")+"$");const gp=m=>{const values=m.result.slice(1);const keys=Array.from(m.route.path.matchAll(/:(\w+)/g)).map(result=>result[1]);return Object.fromEntries(keys.map((key,i)=>{return[key,values[i]];}));};const navigateTo=url=>{history.pushState(null,null,url);router();};const router=async()=>{const potentialMatches=routes.map(route=>{return{route:route,result:location.pathname.match(ptr(route.path))};});let match=potentialMatches.find(potentialMatch=>potentialMatch.result!==null);if(!match){navigateTo("/");return;}const view=new match.route.view(gp(match));root.innerHTML=await view.getHtml();};window.addEventListener("popstate", router);document.addEventListener("DOMContentLoaded",()=>{document.body.addEventListener("click",e=>{if(e.target.matches("[data-link]")){e.preventDefault();navigateTo(e.target.getAttribute("href"));}});router();});